---
interface Props {
  lang: 'es' | 'en';
}

const { lang } = Astro.props;
const alternateLang = lang === 'es' ? 'en' : 'es';
const alternateUrl = lang === 'es' ? '/en/' : '/es/';

const text = {
  es: {
    work: 'Nuestro Trabajo',
    pricing: 'Precios',
    contact: 'Cont√°ctanos'
  },
  en: {
    work: 'Our Work',
    pricing: 'Pricing',
    contact: 'Contact Us'
  }
};

const t = text[lang];
---

<nav class="sticky top-0 z-50 bg-cream/95 backdrop-blur-sm shadow-sm">
  <div class="relative max-w-6xl mx-auto px-8 min-h-[80px] md:min-h-[110px] flex items-center justify-end">
    <!-- Logo (centered vertically, positioned left) -->
    <a href={`/${lang}/`} class="absolute left-0 md:left-[-5.5rem] top-1/2 -translate-y-1/2 z-[101]">
      <img
        src="/images/logo_transparent.png"
        alt="Creciendo Logo"
        class="h-[140px] md:h-[220px] w-auto"
        style="filter: drop-shadow(0 0 10px var(--color-cream, #F9F7F2)) drop-shadow(0 0 2px var(--color-cream, #F9F7F2));"
      />
    </a>

    <!-- Desktop Nav -->
    <div class="hidden md:flex items-center gap-6">
      <a href="#partners" class="text-charcoal hover:text-terracotta transition-colors font-medium">
        {t.work}
      </a>
      <a href="#services" class="text-charcoal hover:text-terracotta transition-colors font-medium">
        {t.pricing}
      </a>
      <a
        href="#audit"
        class="px-6 py-2.5 bg-terracotta text-cream font-semibold rounded-full hover:bg-terracotta-dark hover:-translate-y-0.5 transition-all duration-300 shadow-md"
      >
        {t.contact}
      </a>
      <a
        href={alternateUrl}
        class="px-4 py-1.5 border border-forest text-forest font-medium rounded-full hover:bg-forest hover:text-cream transition-all duration-300"
      >
        {alternateLang.toUpperCase()}
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button id="mobile-menu-btn" class="md:hidden p-2" aria-label="Menu">
      <div class="w-6 h-0.5 bg-forest mb-1.5"></div>
      <div class="w-6 h-0.5 bg-forest mb-1.5"></div>
      <div class="w-6 h-0.5 bg-forest"></div>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden md:hidden bg-cream border-t border-gray-200 px-4 py-4">
    <div class="flex flex-col gap-4">
      <a href="#partners" class="text-charcoal hover:text-terracotta transition-colors font-medium">
        {t.work}
      </a>
      <a href="#services" class="text-charcoal hover:text-terracotta transition-colors font-medium">
        {t.pricing}
      </a>
      <a
        href="#audit"
        class="px-6 py-2.5 bg-terracotta text-cream font-semibold rounded-full text-center hover:bg-terracotta-dark transition-all duration-300"
      >
        {t.contact}
      </a>
      <a
        href={alternateUrl}
        class="px-4 py-1.5 border border-forest text-forest font-medium rounded-full text-center hover:bg-forest hover:text-cream transition-all duration-300"
      >
        {alternateLang.toUpperCase()}
      </a>
    </div>
  </div>
</nav>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  menuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  // Close menu when clicking anchor links
  mobileMenu?.querySelectorAll('a[href^="#"]').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
    });
  });
</script>
