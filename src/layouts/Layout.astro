---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  lang?: 'es' | 'en';
}

const {
  title,
  description = "Construimos las vitrinas digitales que los negocios latinos de Chicago merecen.",
  lang = 'es'
} = Astro.props;

const pathname = Astro.url.pathname;
const isRoot = pathname === '/' || pathname === '';
const alternateUrl = lang === 'es' ? '/' : '/es/';
const canonicalUrl = isRoot ? 'https://creciendo.studio/' : (lang === 'es' ? 'https://creciendo.studio/es/' : 'https://creciendo.studio/');
---

<!doctype html>
<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />

    <!-- Canonical & Hreflang for SEO -->
    <link rel="canonical" href={canonicalUrl} />
    <link rel="alternate" hreflang="es" href="https://creciendo.studio/es/" />
    <link rel="alternate" hreflang="en" href="https://creciendo.studio/" />
    <link rel="alternate" hreflang="x-default" href="https://creciendo.studio/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content="https://creciendo.studio/images/hero_culture.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalUrl} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content="https://creciendo.studio/images/hero_culture.png" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/images/favicon.svg" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />

    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6B4SFQ3BB4"></script>
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-6B4SFQ3BB4');
    </script>

    <!-- LocalBusiness Schema -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Creciendo Studio",
      "description": lang === 'es'
        ? "Construimos las vitrinas digitales que los negocios latinos de Chicago merecen."
        : "We build the digital storefronts that Chicago's Latino-owned businesses deserve.",
      "url": "https://creciendo.studio",
      "telephone": "+1-407-766-2649",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Chicago",
        "addressRegion": "IL",
        "addressCountry": "US"
      },
      "areaServed": {
        "@type": "City",
        "name": "Chicago"
      },
      "priceRange": "$60/month",
      "serviceType": ["Web Design", "Website Development", "Google Business Profile Optimization"],
      "knowsLanguage": ["en", "es"],
      "parentOrganization": {
        "@type": "Organization",
        "name": "TinyGoat Ventures"
      }
    })} />
  </head>
  <body class="min-h-screen">
    <slot />
  </body>
</html>
